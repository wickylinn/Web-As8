<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign In - Play Beat</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #3D3E40;
      --accent-color: #E32C2B;
      --bg1-color: #f5f5f5;
    }
    .dark-theme {
      --bg-color: #30302f;
      --text-color: #eaeaea;
      --accent-color: #7fd367;
      --bg1-color: #424241;
    }

    body{
      background:var(--bg-color);
      color:var(--text-color);
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: background .3s, color .3s;
      font-size:16px;
    }

    .nav-header{
      display:flex;justify-content:space-between;align-items:center;
      padding:1rem 3rem;background:var(--bg1-color);
      box-shadow:0 2px 10px rgba(0,0,0,.1);
      position:fixed;top:0;left:0;right:0;z-index:1000
    }
    .nav-left,.nav-right{display:flex;align-items:center;gap:1rem}
    button, .btn-theme {
      background:var(--accent-color);
      color:var(--bg-color);
      font-weight:700;border:0;padding:12px 20px;font-size:16px;border-radius:100px;cursor:pointer;transition:all .2s
    }
    button:hover, .btn-theme:hover{opacity:.9;transform:translateY(-1px)}

    .card{background:var(--bg1-color)!important;border:none!important;color:var(--text-color)!important}
    .form-control,.input-group-text{
      background:var(--bg-color)!important;color:var(--text-color)!important;
      border:2px solid #ddd!important;transition:all .2s
    }
    .form-control:focus{
      border-color:var(--accent-color)!important;
      box-shadow:0 0 0 .2rem rgba(227,44,43,.25)!important
    }

    .vinyl-decoration{
      width:120px;height:120px;border-radius:50%;
      background:repeating-radial-gradient(circle,#111 0 2px,#393939 3px 4px);
      position:relative;box-shadow:inset 0 0 20px #000;animation:spin 5s linear infinite;
      margin-inline:auto
    }
    .vinyl-decoration .label{
      width:50px;height:50px;background:var(--accent-color);border-radius:50%;
      position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;box-shadow:inset 0 0 10px #000
    }
    .vinyl-decoration .spindle{
      width:10px;height:10px;background:var(--bg-color);border-radius:50%;
      position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2
    }
    @keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}

    .shake{animation:shake .25s linear 0s 1}
    @keyframes shake{
      0%{transform:translateX(0)}
      25%{transform:translateX(-6px)}
      50%{transform:translateX(6px)}
      75%{transform:translateX(-4px)}
      100%{transform:translateX(0)}
    }

    .auth-wrap{max-width: 560px; margin: 0 auto;}
  </style>
</head>

<body>
  <header class="nav-header">
    <div class="nav-left">
      <button onclick="window.location.href='index.html'">Home</button>
      <button onclick="window.location.href='about.html'">About</button>
      <button onclick="window.location.href='news.html'">News</button>
      <button onclick="window.location.href='listen.html'">Start Listening</button>
      <button class="btn-theme" onclick="toggleTheme()">Toggle Theme</button>
    </div>
  </header>

  <main class="container mt-5 pt-5">
    <div class="auth-wrap">

      <!-- Welcome Back -->
      <div class="card text-center shadow-lg mb-4" 
           style="background: linear-gradient(135deg, var(--bg1-color) 0%, var(--bg-color) 100%) !important;">
        <div class="card-body p-5">
          <div class="vinyl-decoration mb-4">
            <div class="label"></div>
            <div class="spindle"></div>
          </div>
          <h2 class="mb-2">Welcome Back</h2>
          <p class="mb-0">Sign in to continue your beat</p>
        </div>
      </div>

      <!-- Sign In -->
      <div class="card shadow-lg mb-3" id="signin-card">
        <div class="card-body p-4 p-md-5">
          <h1 class="text-center mb-2">Sign In</h1>

          <form id="signin-form" novalidate>
            <div class="mb-3">
              <label class="form-label">Login</label>
              <div class="input-group">
                <span class="input-group-text">üë§</span>
                <input type="text" id="login" class="form-control" required />
              </div>
            </div>

            <div class="mb-2">
              <label class="form-label">Password</label>
              <div class="input-group">
                <span class="input-group-text">üîí</span>
                <input type="password" id="password" class="form-control" required />
              </div>
            </div>

            <div id="error-box" class="text-danger small mb-3" style="min-height:1.25rem;"></div>

            <button type="submit" class="btn btn-primary btn-lg w-100">Sign In</button>
          </form>

          <div class="text-center mt-4">
            <span>Don‚Äôt have an account?</span><br>
            <a href="register.html" class="btn btn-outline-secondary btn-sm">Register</a>
          </div>

          <div class="text-center mt-3">
            <a href="index.html" class="btn btn-outline-secondary btn-sm">‚Üê Back to Home</a>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script src="toggleTheme.js"></script>

  <script>
    (function(){
      const form = document.getElementById('signin-form');
      const loginInput = document.getElementById('login');
      const passInput  = document.getElementById('password');
      const errorBox = document.getElementById('error-box');
      const card = document.getElementById('signin-card');

      const ADMIN_LOGIN = 'admin';
      const ADMIN_PASS  = '123';

      form.addEventListener('submit', function(e){
        e.preventDefault();

        const login = loginInput.value.trim();
        const pass  = passInput.value;

        if(!login || !pass){
          showError('Please fill in both fields.');
          shake(card);
          return;
        }

        if(login === ADMIN_LOGIN && pass === ADMIN_PASS){

          const adminUser = {
            username: "Administrator",
            phone: "+7 (777) 777-77-77",
            email: "admin@playbeat.com",
            avatar: "defaultAva.png",
            friends: []
          };

          localStorage.setItem("user", JSON.stringify(adminUser));
          localStorage.setItem("isAdmin", "true");

          setTimeout(()=>window.location.href='profile.html', 700);
          return;
        }

        // ‚ùå Wrong login
        localStorage.removeItem("isAdmin");
        localStorage.removeItem("user");

        showError('Invalid credentials. Admin only.');
        shake(card);
      });

      function showError(msg){ errorBox.textContent = msg; }
      function shake(el){
        el.classList.remove('shake');
        void el.offsetWidth;
        el.classList.add('shake');
      }
    })();
  </script>

</body>
</html>
